/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => TreeNavigatorPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian2 = require("obsidian");

// tree-view.ts
var import_obsidian = require("obsidian");
var VIEW_TYPE_TREE = "tree-navigator-view";
var TreeView = class extends import_obsidian.ItemView {
  constructor(leaf, toggleCallback) {
    super(leaf);
    this.toggleCallback = toggleCallback;
    this.nodes = [];
    this.selectedIndex = 0;
    this.expandedMap = /* @__PURE__ */ new Map();
  }
  getViewType() {
    return VIEW_TYPE_TREE;
  }
  getDisplayText() {
    return "Tree Navigator";
  }
  focusContainer() {
    this.containerEl.tabIndex = 0;
    this.containerEl.focus();
  }
  focusFirstItem() {
    const first = this.container.querySelector(".tree-item");
    first?.focus();
  }
  async onOpen() {
    this.container = this.containerEl.children[1];
    this.container.empty();
    await this.buildTree();
    this.render();
    this.registerDomEvent(
      this.containerEl,
      "keydown",
      (e) => {
        if (e.key === "n" && e.altKey) {
          this.toggleCallback();
          e.preventDefault();
          return;
        }
        this.onKey(e);
      }
    );
    this.containerEl.tabIndex = 0;
    this.containerEl.focus();
  }
  async buildTree() {
    this.nodes = [];
    const root = this.app.vault.getRoot();
    const walk = (folder, depth = 0, parent) => {
      const isExpanded = this.expandedMap.get(folder.path) ?? depth === 0;
      const folderNode = { file: folder, depth, expanded: isExpanded, parent };
      this.nodes.push(folderNode);
      if (isExpanded) {
        folder.children.sort((a, b) => {
          if (a instanceof import_obsidian.TFolder && b instanceof import_obsidian.TFile) return -1;
          if (a instanceof import_obsidian.TFile && b instanceof import_obsidian.TFolder) return 1;
          return a.name.localeCompare(b.name);
        }).forEach((child) => {
          if (child instanceof import_obsidian.TFolder) {
            walk(child, depth + 1, folderNode);
          } else {
            this.nodes.push({
              file: child,
              depth: depth + 1,
              expanded: false,
              parent: folderNode
            });
          }
        });
      }
    };
    root.children.sort((a, b) => {
      if (a instanceof import_obsidian.TFolder && b instanceof import_obsidian.TFile) return -1;
      if (a instanceof import_obsidian.TFile && b instanceof import_obsidian.TFolder) return 1;
      return a.name.localeCompare(b.name);
    }).forEach((child) => {
      if (child instanceof import_obsidian.TFolder) {
        walk(child, 0);
      } else {
        this.nodes.push({ file: child, depth: 0, expanded: false });
      }
    });
  }
  render() {
    this.container.empty();
    this.nodes.forEach((node, idx) => {
      const isFolder = node.file instanceof import_obsidian.TFolder;
      const wrapper = this.container.createDiv(`tree-item ${isFolder ? "folder" : "file"} depth-${node.depth}`);
      node.domEl = wrapper;
      if (isFolder) {
        wrapper.toggleClass("expanded", node.expanded);
        wrapper.toggleClass("collapsed", !node.expanded);
        const folderEl = wrapper.createDiv("nav-folder-title");
        folderEl.createSpan({
          cls: "nav-folder-collapse-icon",
          attr: { "aria-hidden": "true" }
        });
        folderEl.createSpan({ cls: "tree-icon mod-folder" });
        folderEl.createDiv({
          cls: "nav-folder-title-content",
          text: node.file.name
        });
      } else {
        const fileEl = wrapper.createDiv("nav-file-title");
        fileEl.createSpan({ cls: "tree-icon mod-document" });
        fileEl.createDiv({
          cls: "nav-file-title-content",
          text: node.file.name
        });
      }
      if (idx === this.selectedIndex) {
        wrapper.addClass("selected-tree-item");
        wrapper.scrollIntoView({ block: "nearest" });
      }
      wrapper.onclick = () => this.selectNode(idx);
    });
  }
  onKey(e) {
    switch (e.key) {
      case "j":
      case "ArrowDown":
        this.moveCursor(1);
        break;
      case "k":
      case "ArrowUp":
        this.moveCursor(-1);
        break;
      case "l":
      case "o":
      case "Enter":
      case "h":
        this.collapseOrExpand();
        break;
      case "a":
        this.createPrompt();
        break;
      case "d":
        this.deletePrompt();
        break;
      case "r":
        this.renamePrompt();
        break;
      case "R":
        this.refresh();
        break;
      default:
        return;
    }
    e.preventDefault();
  }
  selectNode(idx) {
    this.selectedIndex = idx;
    this.render();
  }
  moveCursor(delta) {
    const max = this.nodes.length - 1;
    this.selectedIndex = Math.max(0, Math.min(max, this.selectedIndex + delta));
    this.render();
  }
  collapseRecursively(folder) {
    this.expandedMap.set(folder.path, false);
    folder.children.forEach((child) => {
      if (child instanceof import_obsidian.TFolder) {
        this.collapseRecursively(child);
      }
    });
  }
  async collapseOrExpand() {
    const node = this.nodes[this.selectedIndex];
    if (node.file instanceof import_obsidian.TFolder) {
      const path = node.file.path;
      const isExpanded = this.expandedMap.get(path) ?? false;
      if (isExpanded) {
        this.collapseRecursively(node.file);
      } else {
        this.expandedMap.set(path, true);
      }
      await this.buildTree();
      this.render();
    } else {
      await this.app.workspace.openLinkText(node.file.path, "", false);
    }
  }
  async createPrompt() {
    const node = this.nodes[this.selectedIndex];
    const parentPath = node.file instanceof import_obsidian.TFolder ? node.file.path : node.file.parent?.path ?? "";
    const name = await new TextPromptModal(this.app, "New file/folder name").openAndGetValue();
    if (!name) return;
    if (name.endsWith("/")) {
      await this.app.vault.createFolder(`${parentPath}/${name.slice(0, -1)}`);
    } else {
      const fileName = name.includes(".") ? name : `${name}.md`;
      await this.app.vault.create(`${parentPath}/${fileName}`, "");
    }
    await this.refresh();
  }
  async deletePrompt() {
    const node = this.nodes[this.selectedIndex];
    const confirmed = await new ConfirmationModal(
      this.app,
      `Delete "${node.file.name}"?`
    ).openAndGetValue();
    if (!confirmed) return;
    await this.app.fileManager.trashFile(node.file);
    this.selectedIndex = Math.max(0, this.selectedIndex - 1);
    await this.refresh();
  }
  async renamePrompt() {
    const node = this.nodes[this.selectedIndex];
    const parentPath = node.file.parent?.path ?? "";
    const newName = await new TextPromptModal(
      this.app,
      "Rename to:",
      node.file.name
    ).openAndGetValue();
    if (!newName) return;
    await this.app.vault.rename(node.file, `${parentPath}/${newName}`);
    await this.refresh();
  }
  async refresh() {
    await this.buildTree();
    this.render();
  }
};
var TextPromptModal = class extends import_obsidian.Modal {
  constructor(app, title, initial = "") {
    super(app);
    this.title = title;
    this.initial = initial;
    this.result = "";
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { text: this.title });
    const input = contentEl.createEl("input", { type: "text" });
    input.value = this.initial;
    input.addClass("tree-text-input");
    input.focus();
    input.onkeydown = (e) => {
      if (e.key === "Enter") {
        this.result = input.value;
        this.close();
      }
    };
    const submit = contentEl.createEl("button", { text: "OK" });
    submit.onclick = () => {
      this.result = input.value;
      this.close();
    };
  }
  openAndGetValue() {
    return new Promise((resolve) => {
      this.onClose = () => {
        super.onClose();
        resolve(this.result);
      };
      this.open();
    });
  }
};
var ConfirmationModal = class extends import_obsidian.Modal {
  constructor(app, message) {
    super(app);
    this.message = message;
    this.result = false;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { text: this.message });
    const yes = contentEl.createEl("button", { text: "Yes" });
    const no = contentEl.createEl("button", { text: "No" });
    yes.onclick = () => {
      this.result = true;
      this.close();
    };
    no.onclick = () => {
      this.result = false;
      this.close();
    };
  }
  openAndGetValue() {
    return new Promise((resolve) => {
      this.onClose = () => {
        super.onClose();
        resolve(this.result);
      };
      this.open();
    });
  }
};

// main.ts
var TreeNavigatorPlugin = class extends import_obsidian2.Plugin {
  constructor() {
    super(...arguments);
    this.lastLeaf = null;
  }
  onload() {
    this.registerView(
      VIEW_TYPE_TREE,
      (leaf) => new TreeView(leaf, () => this.activateView())
    );
    this.addRibbonIcon(
      "folder",
      "Toggle tree",
      () => this.activateView()
    );
    this.addCommand({
      id: "toggle-tree-navigator",
      name: "Toggle tree",
      callback: () => this.activateView()
    });
  }
  async activateView() {
    const inTree = this.app.workspace.getActiveViewOfType(TreeView);
    if (inTree && this.lastLeaf) {
      this.app.workspace.setActiveLeaf(this.lastLeaf);
      return;
    }
    const mdView = this.app.workspace.getActiveViewOfType(import_obsidian2.MarkdownView);
    if (mdView) {
      const viewType = mdView.getViewType();
      this.lastLeaf = this.app.workspace.getLeavesOfType(viewType).find((l) => l.view === mdView) ?? null;
    }
    let treeLeaf = this.app.workspace.getLeavesOfType(VIEW_TYPE_TREE)[0];
    if (!treeLeaf) {
      const left = this.app.workspace.getLeftLeaf(false);
      treeLeaf = left ?? this.app.workspace.getLeaf("split");
    }
    await treeLeaf.setViewState({ type: VIEW_TYPE_TREE, active: true });
    this.app.workspace.revealLeaf(treeLeaf);
    const view = treeLeaf.view;
    if (view instanceof TreeView) {
      view.focusContainer();
      view.focusFirstItem();
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJ0cmVlLXZpZXcudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IFBsdWdpbiwgV29ya3NwYWNlTGVhZiwgTWFya2Rvd25WaWV3IH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBUcmVlVmlldywgVklFV19UWVBFX1RSRUUgfSBmcm9tIFwiLi90cmVlLXZpZXdcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVHJlZU5hdmlnYXRvclBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gIHByaXZhdGUgbGFzdExlYWY6IFdvcmtzcGFjZUxlYWYgfCBudWxsID0gbnVsbDtcblxuICBvbmxvYWQoKSB7XG4gICAgLy8gMSkgUmVnaXN0ZXIgb3VyIGN1c3RvbSBUcmVlVmlld1xuICAgIHRoaXMucmVnaXN0ZXJWaWV3KFxuICAgICAgVklFV19UWVBFX1RSRUUsXG4gICAgICAobGVhZikgPT4gbmV3IFRyZWVWaWV3KGxlYWYsICgpID0+IHRoaXMuYWN0aXZhdGVWaWV3KCkpXG4gICAgKTtcblxuICAgIC8vIDIpIFJpYmJvbiBpY29uIHRvIHRvZ2dsZSB2aWV3XG4gICAgdGhpcy5hZGRSaWJib25JY29uKFwiZm9sZGVyXCIsIFwiVG9nZ2xlIHRyZWVcIiwgKCkgPT5cbiAgICAgIHRoaXMuYWN0aXZhdGVWaWV3KClcbiAgICApO1xuXG4gICAgLy8gMykgQ29tbWFuZCB3aXRob3V0IHBsdWdpbiBuYW1lIG9yIGRlZmF1bHQgaG90a2V5XG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiBcInRvZ2dsZS10cmVlLW5hdmlnYXRvclwiLFxuICAgICAgbmFtZTogXCJUb2dnbGUgdHJlZVwiLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMuYWN0aXZhdGVWaWV3KCksXG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgYWN0aXZhdGVWaWV3KCkge1xuICAgIC8vIEEpIElmIFRyZWVWaWV3IGlzIGFjdGl2ZSwgcmV0dXJuIHRvIGxhc3QgTWFya2Rvd24gbGVhZlxuICAgIGNvbnN0IGluVHJlZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKFRyZWVWaWV3KTtcbiAgICBpZiAoaW5UcmVlICYmIHRoaXMubGFzdExlYWYpIHtcbiAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5zZXRBY3RpdmVMZWFmKHRoaXMubGFzdExlYWYpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEIpIElmIGN1cnJlbnQgaXMgTWFya2Rvd24sIHN0YXNoIHRoYXQgbGVhZlxuICAgIGNvbnN0IG1kVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgaWYgKG1kVmlldykge1xuICAgICAgY29uc3Qgdmlld1R5cGUgPSBtZFZpZXcuZ2V0Vmlld1R5cGUoKTtcbiAgICAgIHRoaXMubGFzdExlYWYgPVxuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2VcbiAgICAgICAgICAuZ2V0TGVhdmVzT2ZUeXBlKHZpZXdUeXBlKVxuICAgICAgICAgIC5maW5kKChsKSA9PiBsLnZpZXcgPT09IG1kVmlldykgPz8gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBDKSBGaW5kIG9yIGNyZWF0ZSB0aGUgVHJlZVZpZXcgbGVhZlxuICAgIGxldCB0cmVlTGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1RSRUUpWzBdO1xuICAgIGlmICghdHJlZUxlYWYpIHtcbiAgICAgIGNvbnN0IGxlZnQgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVmdExlYWYoZmFsc2UpO1xuICAgICAgdHJlZUxlYWYgPSBsZWZ0ID8/IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKFwic3BsaXRcIik7XG4gICAgfVxuXG4gICAgLy8gRCkgUmV2ZWFsICYgYWN0aXZhdGVcbiAgICBhd2FpdCB0cmVlTGVhZi5zZXRWaWV3U3RhdGUoeyB0eXBlOiBWSUVXX1RZUEVfVFJFRSwgYWN0aXZlOiB0cnVlIH0pO1xuICAgIHRoaXMuYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKHRyZWVMZWFmKTtcblxuICAgIC8vIEUpIEZvY3VzIGluc2lkZSB0aGUgVHJlZVZpZXdcbiAgICBjb25zdCB2aWV3ID0gdHJlZUxlYWYudmlldztcbiAgICBpZiAodmlldyBpbnN0YW5jZW9mIFRyZWVWaWV3KSB7XG4gICAgICB2aWV3LmZvY3VzQ29udGFpbmVyKCk7XG4gICAgICB2aWV3LmZvY3VzRmlyc3RJdGVtKCk7XG4gICAgfVxuICB9XG59IiwgImltcG9ydCB7XG4gIEFwcCxcbiAgSXRlbVZpZXcsXG4gIFdvcmtzcGFjZUxlYWYsXG4gIE1vZGFsLFxuICBURm9sZGVyLFxuICBURmlsZSxcbiAgVEFic3RyYWN0RmlsZSxcbn0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbmV4cG9ydCBjb25zdCBWSUVXX1RZUEVfVFJFRSA9IFwidHJlZS1uYXZpZ2F0b3Itdmlld1wiO1xuXG5pbnRlcmZhY2UgTm9kZSB7XG4gIGZpbGU6IFRBYnN0cmFjdEZpbGU7XG4gIGRlcHRoOiBudW1iZXI7XG4gIGV4cGFuZGVkOiBib29sZWFuO1xuICBwYXJlbnQ/OiBOb2RlO1xuICBkb21FbD86IEhUTUxEaXZFbGVtZW50O1xufVxuXG5leHBvcnQgY2xhc3MgVHJlZVZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XG4gIHByaXZhdGUgbm9kZXM6IE5vZGVbXSA9IFtdO1xuICBwcml2YXRlIHNlbGVjdGVkSW5kZXggPSAwO1xuICBwcml2YXRlIGNvbnRhaW5lciE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIGV4cGFuZGVkTWFwID0gbmV3IE1hcDxzdHJpbmcsIGJvb2xlYW4+KCk7XG5cbiAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcHJpdmF0ZSB0b2dnbGVDYWxsYmFjazogKCkgPT4gdm9pZCkge1xuICAgIHN1cGVyKGxlYWYpO1xuICB9XG5cbiAgZ2V0Vmlld1R5cGUoKSB7XG4gICAgcmV0dXJuIFZJRVdfVFlQRV9UUkVFO1xuICB9XG5cbiAgZ2V0RGlzcGxheVRleHQoKSB7XG4gICAgcmV0dXJuIFwiVHJlZSBOYXZpZ2F0b3JcIjtcbiAgfVxuXG4gIGZvY3VzQ29udGFpbmVyKCkge1xuICAgIHRoaXMuY29udGFpbmVyRWwudGFiSW5kZXggPSAwO1xuICAgIHRoaXMuY29udGFpbmVyRWwuZm9jdXMoKTtcbiAgfVxuXG4gIGZvY3VzRmlyc3RJdGVtKCkge1xuICAgIGNvbnN0IGZpcnN0ID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcihcIi50cmVlLWl0ZW1cIikgYXMgSFRNTEVsZW1lbnQ7XG4gICAgZmlyc3Q/LmZvY3VzKCk7XG4gIH1cblxuICBhc3luYyBvbk9wZW4oKSB7XG4gICAgdGhpcy5jb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuWzFdIGFzIEhUTUxFbGVtZW50O1xuICAgIHRoaXMuY29udGFpbmVyLmVtcHR5KCk7XG5cbiAgICBhd2FpdCB0aGlzLmJ1aWxkVHJlZSgpO1xuICAgIHRoaXMucmVuZGVyKCk7XG5cbiAgICB0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoXG4gICAgICB0aGlzLmNvbnRhaW5lckVsLFxuICAgICAgXCJrZXlkb3duXCIsXG4gICAgICAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgICBpZiAoZS5rZXkgPT09IFwiblwiICYmIGUuYWx0S2V5KSB7XG4gICAgICAgICAgdGhpcy50b2dnbGVDYWxsYmFjaygpO1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vbktleShlKTtcbiAgICAgIH1cbiAgICApO1xuXG4gICAgdGhpcy5jb250YWluZXJFbC50YWJJbmRleCA9IDA7XG4gICAgdGhpcy5jb250YWluZXJFbC5mb2N1cygpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBidWlsZFRyZWUoKSB7XG4gICAgdGhpcy5ub2RlcyA9IFtdO1xuICAgIGNvbnN0IHJvb3QgPSB0aGlzLmFwcC52YXVsdC5nZXRSb290KCk7XG5cbiAgICBjb25zdCB3YWxrID0gKGZvbGRlcjogVEZvbGRlciwgZGVwdGggPSAwLCBwYXJlbnQ/OiBOb2RlKSA9PiB7XG4gICAgICBjb25zdCBpc0V4cGFuZGVkID0gdGhpcy5leHBhbmRlZE1hcC5nZXQoZm9sZGVyLnBhdGgpID8/IGRlcHRoID09PSAwO1xuICAgICAgY29uc3QgZm9sZGVyTm9kZTogTm9kZSA9IHsgZmlsZTogZm9sZGVyLCBkZXB0aCwgZXhwYW5kZWQ6IGlzRXhwYW5kZWQsIHBhcmVudCB9O1xuICAgICAgdGhpcy5ub2Rlcy5wdXNoKGZvbGRlck5vZGUpO1xuXG4gICAgICBpZiAoaXNFeHBhbmRlZCkge1xuICAgICAgICBmb2xkZXIuY2hpbGRyZW5cbiAgICAgICAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgaWYgKGEgaW5zdGFuY2VvZiBURm9sZGVyICYmIGIgaW5zdGFuY2VvZiBURmlsZSkgcmV0dXJuIC0xO1xuICAgICAgICAgICAgaWYgKGEgaW5zdGFuY2VvZiBURmlsZSAmJiBiIGluc3RhbmNlb2YgVEZvbGRlcikgcmV0dXJuIDE7XG4gICAgICAgICAgICByZXR1cm4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5mb3JFYWNoKChjaGlsZCkgPT4ge1xuICAgICAgICAgICAgaWYgKGNoaWxkIGluc3RhbmNlb2YgVEZvbGRlcikge1xuICAgICAgICAgICAgICB3YWxrKGNoaWxkLCBkZXB0aCArIDEsIGZvbGRlck5vZGUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5ub2Rlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBmaWxlOiBjaGlsZCxcbiAgICAgICAgICAgICAgICBkZXB0aDogZGVwdGggKyAxLFxuICAgICAgICAgICAgICAgIGV4cGFuZGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGZvbGRlck5vZGUsXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByb290LmNoaWxkcmVuXG4gICAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBpZiAoYSBpbnN0YW5jZW9mIFRGb2xkZXIgJiYgYiBpbnN0YW5jZW9mIFRGaWxlKSByZXR1cm4gLTE7XG4gICAgICAgIGlmIChhIGluc3RhbmNlb2YgVEZpbGUgJiYgYiBpbnN0YW5jZW9mIFRGb2xkZXIpIHJldHVybiAxO1xuICAgICAgICByZXR1cm4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKTtcbiAgICAgIH0pXG4gICAgICAuZm9yRWFjaCgoY2hpbGQpID0+IHtcbiAgICAgICAgaWYgKGNoaWxkIGluc3RhbmNlb2YgVEZvbGRlcikge1xuICAgICAgICAgIHdhbGsoY2hpbGQsIDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubm9kZXMucHVzaCh7IGZpbGU6IGNoaWxkLCBkZXB0aDogMCwgZXhwYW5kZWQ6IGZhbHNlIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyKCkge1xuICAgIHRoaXMuY29udGFpbmVyLmVtcHR5KCk7XG5cbiAgICB0aGlzLm5vZGVzLmZvckVhY2goKG5vZGUsIGlkeCkgPT4ge1xuICAgICAgY29uc3QgaXNGb2xkZXIgPSBub2RlLmZpbGUgaW5zdGFuY2VvZiBURm9sZGVyO1xuICAgICAgY29uc3Qgd3JhcHBlciA9IHRoaXMuY29udGFpbmVyLmNyZWF0ZURpdihgdHJlZS1pdGVtICR7aXNGb2xkZXIgPyBcImZvbGRlclwiIDogXCJmaWxlXCJ9IGRlcHRoLSR7bm9kZS5kZXB0aH1gKTtcbiAgICAgIG5vZGUuZG9tRWwgPSB3cmFwcGVyO1xuXG4gICAgICBpZiAoaXNGb2xkZXIpIHtcbiAgICAgICAgd3JhcHBlci50b2dnbGVDbGFzcyhcImV4cGFuZGVkXCIsIG5vZGUuZXhwYW5kZWQpO1xuICAgICAgICB3cmFwcGVyLnRvZ2dsZUNsYXNzKFwiY29sbGFwc2VkXCIsICFub2RlLmV4cGFuZGVkKTtcblxuICAgICAgICBjb25zdCBmb2xkZXJFbCA9IHdyYXBwZXIuY3JlYXRlRGl2KFwibmF2LWZvbGRlci10aXRsZVwiKTtcbiAgICAgICAgZm9sZGVyRWwuY3JlYXRlU3Bhbih7XG4gICAgICAgICAgY2xzOiBcIm5hdi1mb2xkZXItY29sbGFwc2UtaWNvblwiLFxuICAgICAgICAgIGF0dHI6IHsgXCJhcmlhLWhpZGRlblwiOiBcInRydWVcIiB9LFxuICAgICAgICB9KTtcbiAgICAgICAgZm9sZGVyRWwuY3JlYXRlU3Bhbih7IGNsczogXCJ0cmVlLWljb24gbW9kLWZvbGRlclwiIH0pO1xuICAgICAgICBmb2xkZXJFbC5jcmVhdGVEaXYoe1xuICAgICAgICAgIGNsczogXCJuYXYtZm9sZGVyLXRpdGxlLWNvbnRlbnRcIixcbiAgICAgICAgICB0ZXh0OiBub2RlLmZpbGUubmFtZSxcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBmaWxlRWwgPSB3cmFwcGVyLmNyZWF0ZURpdihcIm5hdi1maWxlLXRpdGxlXCIpO1xuICAgICAgICBmaWxlRWwuY3JlYXRlU3Bhbih7IGNsczogXCJ0cmVlLWljb24gbW9kLWRvY3VtZW50XCIgfSk7XG4gICAgICAgIGZpbGVFbC5jcmVhdGVEaXYoe1xuICAgICAgICAgIGNsczogXCJuYXYtZmlsZS10aXRsZS1jb250ZW50XCIsXG4gICAgICAgICAgdGV4dDogbm9kZS5maWxlLm5hbWUsXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoaWR4ID09PSB0aGlzLnNlbGVjdGVkSW5kZXgpIHtcbiAgICAgICAgd3JhcHBlci5hZGRDbGFzcyhcInNlbGVjdGVkLXRyZWUtaXRlbVwiKTtcbiAgICAgICAgd3JhcHBlci5zY3JvbGxJbnRvVmlldyh7IGJsb2NrOiBcIm5lYXJlc3RcIiB9KTtcbiAgICAgIH1cblxuICAgICAgd3JhcHBlci5vbmNsaWNrID0gKCkgPT4gdGhpcy5zZWxlY3ROb2RlKGlkeCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIG9uS2V5KGU6IEtleWJvYXJkRXZlbnQpIHtcbiAgICBzd2l0Y2ggKGUua2V5KSB7XG4gICAgICBjYXNlIFwialwiOlxuICAgICAgY2FzZSBcIkFycm93RG93blwiOlxuICAgICAgICB0aGlzLm1vdmVDdXJzb3IoMSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImtcIjpcbiAgICAgIGNhc2UgXCJBcnJvd1VwXCI6XG4gICAgICAgIHRoaXMubW92ZUN1cnNvcigtMSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImxcIjpcbiAgICAgIGNhc2UgXCJvXCI6XG4gICAgICBjYXNlIFwiRW50ZXJcIjpcbiAgICAgIGNhc2UgXCJoXCI6XG4gICAgICAgIHRoaXMuY29sbGFwc2VPckV4cGFuZCgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJhXCI6XG4gICAgICAgIHRoaXMuY3JlYXRlUHJvbXB0KCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImRcIjpcbiAgICAgICAgdGhpcy5kZWxldGVQcm9tcHQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiclwiOlxuICAgICAgICB0aGlzLnJlbmFtZVByb21wdCgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJSXCI6XG4gICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBzZWxlY3ROb2RlKGlkeDogbnVtYmVyKSB7XG4gICAgdGhpcy5zZWxlY3RlZEluZGV4ID0gaWR4O1xuICAgIHRoaXMucmVuZGVyKCk7XG4gIH1cblxuICBwcml2YXRlIG1vdmVDdXJzb3IoZGVsdGE6IG51bWJlcikge1xuICAgIGNvbnN0IG1heCA9IHRoaXMubm9kZXMubGVuZ3RoIC0gMTtcbiAgICB0aGlzLnNlbGVjdGVkSW5kZXggPSBNYXRoLm1heCgwLCBNYXRoLm1pbihtYXgsIHRoaXMuc2VsZWN0ZWRJbmRleCArIGRlbHRhKSk7XG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgfVxuXG4gIHByaXZhdGUgY29sbGFwc2VSZWN1cnNpdmVseShmb2xkZXI6IFRGb2xkZXIpIHtcbiAgICB0aGlzLmV4cGFuZGVkTWFwLnNldChmb2xkZXIucGF0aCwgZmFsc2UpO1xuICAgIGZvbGRlci5jaGlsZHJlbi5mb3JFYWNoKChjaGlsZCkgPT4ge1xuICAgICAgaWYgKGNoaWxkIGluc3RhbmNlb2YgVEZvbGRlcikge1xuICAgICAgICB0aGlzLmNvbGxhcHNlUmVjdXJzaXZlbHkoY2hpbGQpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBjb2xsYXBzZU9yRXhwYW5kKCkge1xuICAgIGNvbnN0IG5vZGUgPSB0aGlzLm5vZGVzW3RoaXMuc2VsZWN0ZWRJbmRleF07XG5cbiAgICBpZiAobm9kZS5maWxlIGluc3RhbmNlb2YgVEZvbGRlcikge1xuICAgICAgY29uc3QgcGF0aCA9IG5vZGUuZmlsZS5wYXRoO1xuICAgICAgY29uc3QgaXNFeHBhbmRlZCA9IHRoaXMuZXhwYW5kZWRNYXAuZ2V0KHBhdGgpID8/IGZhbHNlO1xuXG4gICAgICBpZiAoaXNFeHBhbmRlZCkge1xuICAgICAgICB0aGlzLmNvbGxhcHNlUmVjdXJzaXZlbHkobm9kZS5maWxlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZXhwYW5kZWRNYXAuc2V0KHBhdGgsIHRydWUpO1xuICAgICAgfVxuXG4gICAgICBhd2FpdCB0aGlzLmJ1aWxkVHJlZSgpO1xuICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChub2RlLmZpbGUucGF0aCwgXCJcIiwgZmFsc2UpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgY3JlYXRlUHJvbXB0KCkge1xuICAgIGNvbnN0IG5vZGUgPSB0aGlzLm5vZGVzW3RoaXMuc2VsZWN0ZWRJbmRleF07XG4gICAgY29uc3QgcGFyZW50UGF0aCA9XG4gICAgICBub2RlLmZpbGUgaW5zdGFuY2VvZiBURm9sZGVyXG4gICAgICAgID8gbm9kZS5maWxlLnBhdGhcbiAgICAgICAgOiBub2RlLmZpbGUucGFyZW50Py5wYXRoID8/IFwiXCI7XG5cbiAgICBjb25zdCBuYW1lID0gYXdhaXQgbmV3IFRleHRQcm9tcHRNb2RhbCh0aGlzLmFwcCwgXCJOZXcgZmlsZS9mb2xkZXIgbmFtZVwiKS5vcGVuQW5kR2V0VmFsdWUoKTtcbiAgICBpZiAoIW5hbWUpIHJldHVybjtcblxuICAgIGlmIChuYW1lLmVuZHNXaXRoKFwiL1wiKSkge1xuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKGAke3BhcmVudFBhdGh9LyR7bmFtZS5zbGljZSgwLCAtMSl9YCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGZpbGVOYW1lID0gbmFtZS5pbmNsdWRlcyhcIi5cIikgPyBuYW1lIDogYCR7bmFtZX0ubWRgO1xuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGAke3BhcmVudFBhdGh9LyR7ZmlsZU5hbWV9YCwgXCJcIik7XG4gICAgfVxuICAgIGF3YWl0IHRoaXMucmVmcmVzaCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBkZWxldGVQcm9tcHQoKSB7XG4gICAgY29uc3Qgbm9kZSA9IHRoaXMubm9kZXNbdGhpcy5zZWxlY3RlZEluZGV4XTtcbiAgICBjb25zdCBjb25maXJtZWQgPSBhd2FpdCBuZXcgQ29uZmlybWF0aW9uTW9kYWwoXG4gICAgICB0aGlzLmFwcCxcbiAgICAgIGBEZWxldGUgXCIke25vZGUuZmlsZS5uYW1lfVwiP2BcbiAgICApLm9wZW5BbmRHZXRWYWx1ZSgpO1xuICAgIGlmICghY29uZmlybWVkKSByZXR1cm47XG5cbiAgICAvLyBVc2UgdXNlclx1MjAxMHByZWZlcnJlZCB0cmFzaCBpbnN0ZWFkIG9mIGhhcmQgZGVsZXRlXG4gICAgYXdhaXQgdGhpcy5hcHAuZmlsZU1hbmFnZXIudHJhc2hGaWxlKG5vZGUuZmlsZSk7XG4gICAgdGhpcy5zZWxlY3RlZEluZGV4ID0gTWF0aC5tYXgoMCwgdGhpcy5zZWxlY3RlZEluZGV4IC0gMSk7XG4gICAgYXdhaXQgdGhpcy5yZWZyZXNoKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJlbmFtZVByb21wdCgpIHtcbiAgICBjb25zdCBub2RlID0gdGhpcy5ub2Rlc1t0aGlzLnNlbGVjdGVkSW5kZXhdO1xuICAgIGNvbnN0IHBhcmVudFBhdGggPSBub2RlLmZpbGUucGFyZW50Py5wYXRoID8/IFwiXCI7XG5cbiAgICBjb25zdCBuZXdOYW1lID0gYXdhaXQgbmV3IFRleHRQcm9tcHRNb2RhbChcbiAgICAgIHRoaXMuYXBwLFxuICAgICAgXCJSZW5hbWUgdG86XCIsXG4gICAgICBub2RlLmZpbGUubmFtZVxuICAgICkub3BlbkFuZEdldFZhbHVlKCk7XG4gICAgaWYgKCFuZXdOYW1lKSByZXR1cm47XG5cbiAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZW5hbWUobm9kZS5maWxlLCBgJHtwYXJlbnRQYXRofS8ke25ld05hbWV9YCk7XG4gICAgYXdhaXQgdGhpcy5yZWZyZXNoKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJlZnJlc2goKSB7XG4gICAgYXdhaXQgdGhpcy5idWlsZFRyZWUoKTtcbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG59XG5cbi8qIFx1MjAxNFx1MjAxNFx1MjAxNCBTaW1wbGUgUHJvbXB0ICYgQ29uZmlybSBNb2RhbHMgXHUyMDE0XHUyMDE0XHUyMDE0ICovXG5cbmNsYXNzIFRleHRQcm9tcHRNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgcHJpdmF0ZSByZXN1bHQgPSBcIlwiO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwcml2YXRlIHRpdGxlOiBzdHJpbmcsIHByaXZhdGUgaW5pdGlhbCA9IFwiXCIpIHtcbiAgICBzdXBlcihhcHApO1xuICB9XG5cbiAgb25PcGVuKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogdGhpcy50aXRsZSB9KTtcblxuICAgIGNvbnN0IGlucHV0ID0gY29udGVudEVsLmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiB9KTtcbiAgICBpbnB1dC52YWx1ZSA9IHRoaXMuaW5pdGlhbDtcbiAgICBpbnB1dC5hZGRDbGFzcyhcInRyZWUtdGV4dC1pbnB1dFwiKTtcbiAgICBpbnB1dC5mb2N1cygpO1xuXG4gICAgaW5wdXQub25rZXlkb3duID0gKGUpID0+IHtcbiAgICAgIGlmIChlLmtleSA9PT0gXCJFbnRlclwiKSB7XG4gICAgICAgIHRoaXMucmVzdWx0ID0gaW5wdXQudmFsdWU7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3Qgc3VibWl0ID0gY29udGVudEVsLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJPS1wiIH0pO1xuICAgIHN1Ym1pdC5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgdGhpcy5yZXN1bHQgPSBpbnB1dC52YWx1ZTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9O1xuICB9XG5cbiAgb3BlbkFuZEdldFZhbHVlKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICB0aGlzLm9uQ2xvc2UgPSAoKSA9PiB7XG4gICAgICAgIHN1cGVyLm9uQ2xvc2UoKTtcbiAgICAgICAgcmVzb2x2ZSh0aGlzLnJlc3VsdCk7XG4gICAgICB9O1xuICAgICAgdGhpcy5vcGVuKCk7XG4gICAgfSk7XG4gIH1cbn1cblxuY2xhc3MgQ29uZmlybWF0aW9uTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIHByaXZhdGUgcmVzdWx0ID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHByaXZhdGUgbWVzc2FnZTogc3RyaW5nKSB7XG4gICAgc3VwZXIoYXBwKTtcbiAgfVxuXG4gIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IHRoaXMubWVzc2FnZSB9KTtcblxuICAgIGNvbnN0IHllcyA9IGNvbnRlbnRFbC5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiWWVzXCIgfSk7XG4gICAgY29uc3Qgbm8gPSBjb250ZW50RWwuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIk5vXCIgfSk7XG5cbiAgICB5ZXMub25jbGljayA9ICgpID0+IHtcbiAgICAgIHRoaXMucmVzdWx0ID0gdHJ1ZTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9O1xuICAgIG5vLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICB0aGlzLnJlc3VsdCA9IGZhbHNlO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH07XG4gIH1cblxuICBvcGVuQW5kR2V0VmFsdWUoKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICB0aGlzLm9uQ2xvc2UgPSAoKSA9PiB7XG4gICAgICAgIHN1cGVyLm9uQ2xvc2UoKTtcbiAgICAgICAgcmVzb2x2ZSh0aGlzLnJlc3VsdCk7XG4gICAgICB9O1xuICAgICAgdGhpcy5vcGVuKCk7XG4gICAgfSk7XG4gIH1cbn0iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsbUJBQW9EOzs7QUNBcEQsc0JBUU87QUFFQSxJQUFNLGlCQUFpQjtBQVV2QixJQUFNLFdBQU4sY0FBdUIseUJBQVM7QUFB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
